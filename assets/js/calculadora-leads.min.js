!function(){function g(t,n){const a=document.getElementById("cl-form-messages");if(a,a){let e;switch(n){case"error":e="cl-form-messages-errors";break;case"warning":e="cl-form-messages-warning";break;default:e="cl-form-messages-success"}const s=document.createElement("ul"),o=(s.classList.add(e),document.createElement("li"));o.innerText=t,s.append(o),a.append(s)}else switch(n){case"error":console.error("Erro",t);break;case"warning":console.warn("Aviso",t);break;default:console.log("Sucesso",t)}}function e(){const a=document.getElementById("cl-form");if(a,a){var e=document.getElementById("cl-resultados");if(e){const s=a.querySelector("button");s,s&&(console.log("calculaLeads"),console.log("button",s.disabled),a.addEventListener("submit",e=>{if(e.preventDefault(),!s.disabled){s.disabled=!0,s.innerText="Calculando...";{const n=document.getElementById("cl-form-messages");n,n&&(n.innerHTML="")}const m=document.getElementById("cl-resultados");m.style.display="none",console.log("submit");e=ajax_object.ajax_url;const t=new FormData(a);t.append("action","cl_calcula_leads"),fetch(e,{method:"POST",body:t}).then(e=>e.json()).then(e=>{if(!e)return g("A calculadora não retornou nenhum resultado.","warning");if(!e.success)return g(e.data.msg,"error");var t=e.data.visitantes_leads_pct;const n=document.getElementById("visitantes_leads");n,n&&(n.innerText=t+"%");t=e.data.leads_oportunidades_pct;const a=document.getElementById("leads_oportunidades");a,a&&(a.innerText=t+"%");t=e.data.oportunidades_vendas_pct;const s=document.getElementById("oportunidades_vendas");s,s&&(s.innerText=t+"%");t=e.data.vendas;const o=document.getElementById("resultado-vendas");o,o&&(o.innerText=t);var d=e.data.oportunidades_vendas;const l=document.getElementById("resultado-oportunidades");l,l&&(l.innerText=d);d=e.data.leads_oportunidades;const c=document.getElementById("resultado-assinantes-e-leads");c,c&&(c.innerText=d);d=e.data.visitantes_leads;const r=document.getElementById("resultado-visitantes-unicos"),i=(r,r&&(r.innerText=d),document.getElementById("resultado-vendas-desejadas"));i,i&&(i.innerText=t);d=e.data.taxa_conversao;const u=document.getElementById("resultado-taxas-conversao");u,u&&(u.innerText=d+"%"),g("Cálculo de leads finalizado! Veja o resultado abaixo."),m.style.display="block",m.scrollIntoView(!1)}).catch(e=>{g(e,"error")}).finally(()=>{s.disabled=!1,s.innerText="Calcular"})}}))}}}document.addEventListener("DOMContentLoaded",function(){e()})}();