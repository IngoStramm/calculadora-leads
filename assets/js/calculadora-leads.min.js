!function(){function f(t,n){const a=document.getElementById("cl-form-messages");if(a,a){let e;switch(n){case"error":e="cl-form-messages-errors";break;case"warning":e="cl-form-messages-warning";break;default:e="cl-form-messages-success"}const s=document.createElement("ul"),d=(s.classList.add(e),document.createElement("li"));d.innerText=t,s.append(d),a.append(s)}else switch(n){case"error":console.error("Erro",t);break;case"warning":console.warn("Aviso",t);break;default:console.log("Sucesso",t)}}function e(){const a=document.getElementById("cl-form");if(a,a){var e=document.getElementById("cl-resultados");if(e){const s=a.querySelector("button");s,s&&(console.log("calculaLeads"),console.log("button",s.disabled),a.addEventListener("submit",e=>{if(e.preventDefault(),!s.disabled){s.disabled=!0,s.innerText="Calculando...";{const n=document.getElementById("cl-form-messages");n,n&&(n.innerHTML="")}const v=document.getElementById("cl-resultados");v.style.display="none",console.log("submit");e=ajax_object.ajax_url;const t=new FormData(a);t.append("action","cl_calcula_leads"),fetch(e,{method:"POST",body:t}).then(e=>e.json()).then(e=>{if(!e)return f("A calculadora não retornou nenhum resultado.","warning");if(!e.success)return f(e.data.msg,"error");var t=e.data.visitantes_leads_pct;const n=document.getElementById("visitantes_leads");n,n&&(n.innerText=t+"%");t=e.data.leads_oportunidades_pct;const a=document.getElementById("leads_oportunidades");a,a&&(a.innerText=t+"%");t=e.data.oportunidades_vendas_pct;const s=document.getElementById("oportunidades_vendas");s,s&&(s.innerText=t+"%");t=e.data.vendas;const d=document.getElementById("resultado-vendas");d,d&&(d.innerText=t);var o=e.data.oportunidades_vendas;const l=document.getElementById("resultado-oportunidades");l,l&&(l.innerText=o);o=e.data.leads_oportunidades;const r=document.getElementById("resultado-assinantes-e-leads");r,r&&(r.innerText=o);o=e.data.visitantes_leads;const c=document.getElementById("resultado-visitantes-unicos"),i=(c,c&&(c.innerText=o),document.getElementById("resultado-vendas-desejadas"));i,i&&(i.innerText=t);o=e.data.taxa_conversao;const u=document.getElementById("resultado-taxas-conversao");u,u&&(u.innerText=o+"%");t=e.data.vendedores_necessarios;const m=document.getElementById("resultado-vendedores-necessarios");m,m&&(m.innerText=t);o=e.data.leads_atendidos;const g=document.getElementById("resultado-leads-atendidos");g,g&&(g.innerText=o);t=e.data.vendas_realizadas;const y=document.getElementById("resultado-vendas-realizadas");y,y&&(y.innerText=t),f("Cálculo de leads finalizado! Veja o resultado abaixo."),v.style.display="block",v.scrollIntoView(!1)}).catch(e=>{f(e,"error")}).finally(()=>{s.disabled=!1,s.innerText="Calcular"})}}))}}}document.addEventListener("DOMContentLoaded",function(){e()})}();